(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{497:function(t,s,e){t.exports=e.p+"assets/img/1.f5bb7984.png"},572:function(t,s,e){"use strict";e.r(s);var a=e(37),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"elf文件格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elf文件格式"}},[t._v("#")]),t._v(" ELF文件格式")]),t._v(" "),a("hr"),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("软件版本")]),t._v(" "),a("th",[t._v("硬件版本")]),t._v(" "),a("th",[t._v("更新内容")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ELF64")]),t._v(" "),a("td",[t._v("arm64")]),t._v(" "),a("td")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_1-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[t._v("#")]),t._v(" 1. 概述")]),t._v(" "),a("p",[t._v("ELF文件，也就是"),a("strong",[t._v("Executable and Linking Format")]),t._v(".gcc等编译器生成的就是这个类型的文件.存在三种类型的elf文件:")]),t._v(" "),a("ol",[a("li",[t._v("可重定位文件"),a("strong",[t._v("relocatable file")]),t._v(", 可用于生成可执行文件或者共享库文件的二进制代码和数据，例如**.o**文件")]),t._v(" "),a("li",[t._v("可执行文件"),a("strong",[t._v("executable file")]),t._v(", 可直接执行的二进制文件")]),t._v(" "),a("li",[t._v("共享库文件"),a("strong",[t._v("shared object file")]),t._v(", 常见的为**.so**文件，两个作用：\n"),a("ul",[a("li",[t._v("用于链接生成新的二进制文件")]),t._v(" "),a("li",[t._v("用于动态映射到一个可执行文件中创建新的进程")])])])]),t._v(" "),a("h2",{attrs:{id:"_2-elf文件组织形式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-elf文件组织形式"}},[t._v("#")]),t._v(" 2. ELF文件组织形式")]),t._v(" "),a("p",[t._v("分两种格式，一种可执行文件，另外一种用于链接的包括.o和.so")]),t._v(" "),a("p",[a("img",{attrs:{src:e(497),alt:"elf file",title:"elf file"}})]),t._v(" "),a("p",[t._v("一个有效的ELF文件必须满足如下几条：")]),t._v(" "),a("ol",[a("li",[t._v("必须存在文件头")]),t._v(" "),a("li",[t._v("用于连接的ELF必须包括Section head Table,对于可执行文件这部分可选")]),t._v(" "),a("li",[t._v("Program Header Table，可执行文件必须包括，用于连接的ELF文件可选")]),t._v(" "),a("li",[t._v("Section由数据，字符串和可重定位的符号")]),t._v(" "),a("li",[t._v("由头，Section header table, Program header table, Sections组成")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("这里需要注意在linking view中使用的是section,而在executable view中使用是segment,我们写程序时可以通过链接脚本指定当前代码或者数据存放在那个section中，而且只有控制section,而segment是链接器在生成可执行文件时生成的叫segment.")])]),t._v(" "),a("h2",{attrs:{id:"_3-elf文件中使用的数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-elf文件中使用的数据类型"}},[t._v("#")]),t._v(" 3. ELF文件中使用的数据类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名子")]),t._v(" "),a("th",[t._v("大小")]),t._v(" "),a("th",[t._v("对齐方式")]),t._v(" "),a("th",[t._v("功能")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Elf64_Addr")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("表示程序地址")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Off")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("g表示文件偏移")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Half")]),t._v(" "),a("td",[t._v("2")]),t._v(" "),a("td",[t._v("2")]),t._v(" "),a("td",[t._v("表示无符号的中整数")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Word")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("表示无符号的整数")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Sword")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("表示有符号的整数")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Xword")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("表示无符号的大整数")])]),t._v(" "),a("tr",[a("td",[t._v("Elf64_Sxword")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("表示有符号的大整数")])]),t._v(" "),a("tr",[a("td",[t._v("unsigned  char")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("表示无符号的小整数")])])])]),t._v(" "),a("p",[t._v("在linux中是如下的定义：")]),t._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" Elf64_Addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("short")]),t._v(" Elf64_Half"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("signed")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("short")]),t._v(" Elf64_SHalf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" Elf64_Off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("signed")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" Elf64_Sword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" Elf64_Word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" Elf64_Xword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("signed")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" Elf64_Sxword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h2",{attrs:{id:"_4-elf文件头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-elf文件头"}},[t._v("#")]),t._v(" 4. ELF文件头")]),t._v(" "),a("p",[t._v("从linux内核中可以找到头部的数据结构如下：")]),t._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("elf64_hdr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" e_ident"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* ELF "magic number" */')]),t._v("\n\tElf64_Half e_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_machine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Word e_version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Addr e_entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Entry point virtual address */")]),t._v("\n\tElf64_Off e_phoff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Program header table file offset */")]),t._v("\n\tElf64_Off e_shoff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Section header table file offset */")]),t._v("\n\tElf64_Word e_flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_ehsize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_phentsize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_phnum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_shentsize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_shnum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Half e_shstrndx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" Elf64_Ehdr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h3",{attrs:{id:"_4-1-elf头中的e-ident"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-elf头中的e-ident"}},[t._v("#")]),t._v(" 4.1 ELF头中的e_ident")]),t._v(" "),a("p",[t._v("identification魔数将文件标识为 ELF 目标文件，并提供有关目标文件结构的数据表示的信息。\ne_ident是一个数组，在linux内核中使用如下index的访问")]),t._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 这个用于区分32位还是64位，=1 为32位， =2 为64 */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("EI_CLASS")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 这个字段用于表示大小端，=1 为小端， =2 为大端 */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("EI_DATA")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 这个字段用于表示版本，目前使用固定的 EV_CURRENT = 1*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("EI_VERSION")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 这个字段用于表示操作系统和ABI, 有三种 =0为System V ABI, =1为HP-UX operating system， =2为Standalone (embedded) */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("EI_OSABI")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 起始填充位 */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("EI_PAD")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")])])]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h3",{attrs:{id:"_4-2-elf头中的e-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-elf头中的e-type"}},[t._v("#")]),t._v(" 4.2 ELF头中的e_type")]),t._v(" "),a("p",[t._v("类型如下表：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名子")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ET_NONE")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("无文件类型")])]),t._v(" "),a("tr",[a("td",[t._v("ET_REL")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("可重新定位的文件如.o")])]),t._v(" "),a("tr",[a("td",[t._v("ET_EXEC")]),t._v(" "),a("td",[t._v("2")]),t._v(" "),a("td",[t._v("可执行文件")])]),t._v(" "),a("tr",[a("td",[t._v("ET_DYN")]),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("共享库文件")])]),t._v(" "),a("tr",[a("td",[t._v("ET_CORE")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("核心文件")])]),t._v(" "),a("tr",[a("td",[t._v("ET_LOOS")]),t._v(" "),a("td",[t._v("0xFE00")]),t._v(" "),a("td",[t._v("特定环境使用")])]),t._v(" "),a("tr",[a("td",[t._v("ET_HIOS")]),t._v(" "),a("td",[t._v("0xFEFF")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("ET_LOPROC")]),t._v(" "),a("td",[t._v("0xFF00")]),t._v(" "),a("td",[t._v("特定处理器的使用")])]),t._v(" "),a("tr",[a("td",[t._v("ET_HIPROC")]),t._v(" "),a("td",[t._v("0xFFFF")]),t._v(" "),a("td")])])]),t._v(" "),a("h3",{attrs:{id:"_4-3-elf头中的e-machine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-elf头中的e-machine"}},[t._v("#")]),t._v(" 4.3 ELF头中的e_machine")]),t._v(" "),a("p",[t._v("表示目标处理器架构，如arm64 x86")]),t._v(" "),a("h3",{attrs:{id:"_4-4-elf头中的e-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-elf头中的e-version"}},[t._v("#")]),t._v(" 4.4 ELF头中的e_version")]),t._v(" "),a("p",[t._v("这个和e_ident中版本是一样的")]),t._v(" "),a("h3",{attrs:{id:"_4-5-elf头中的e-entry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-elf头中的e-entry"}},[t._v("#")]),t._v(" 4.5 ELF头中的e_entry")]),t._v(" "),a("p",[t._v("包含程序入口点的虚拟地址。如果没有入口点，则此字段包含零")]),t._v(" "),a("h3",{attrs:{id:"_4-6-elf头中的e-phoff"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-elf头中的e-phoff"}},[t._v("#")]),t._v(" 4.6 ELF头中的e_phoff")]),t._v(" "),a("p",[t._v("包含程序头表的文件偏移量，以字节为单位")]),t._v(" "),a("h3",{attrs:{id:"_4-7-elf头中的e-shoff"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-elf头中的e-shoff"}},[t._v("#")]),t._v(" 4.7 ELF头中的e_shoff")]),t._v(" "),a("p",[t._v("包含节头表的文件偏移量，以字节为单位")]),t._v(" "),a("h3",{attrs:{id:"_4-8-elf头中的e-flags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-8-elf头中的e-flags"}},[t._v("#")]),t._v(" 4.8 ELF头中的e_flags")]),t._v(" "),a("p",[t._v("包含特定于处理器的标志")]),t._v(" "),a("h3",{attrs:{id:"_4-9-elf头中的e-ehsize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-9-elf头中的e-ehsize"}},[t._v("#")]),t._v(" 4.9 ELF头中的e_ehsize")]),t._v(" "),a("p",[t._v("包含 ELF 标头的大小（以字节为单位）")]),t._v(" "),a("h3",{attrs:{id:"_4-10-elf头中的e-phentsize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-10-elf头中的e-phentsize"}},[t._v("#")]),t._v(" 4.10 ELF头中的e_phentsize")]),t._v(" "),a("p",[t._v("包含程序头表(Program head table)条目的大小（以字节为单位)")]),t._v(" "),a("h3",{attrs:{id:"_4-11-elf头中的e-phnum"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-11-elf头中的e-phnum"}},[t._v("#")]),t._v(" 4.11 ELF头中的e_phnum")]),t._v(" "),a("p",[t._v("包含程序头表(Program head table)中的条目数")]),t._v(" "),a("h3",{attrs:{id:"_4-12-elf头中的e-shentsize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-12-elf头中的e-shentsize"}},[t._v("#")]),t._v(" 4.12 ELF头中的e_shentsize")]),t._v(" "),a("p",[t._v("每个节头表(section head table)条目的大小（以字节为单位）,也就是每个section head 的大小")]),t._v(" "),a("h3",{attrs:{id:"_4-13-elf头中的e-shnum"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-13-elf头中的e-shnum"}},[t._v("#")]),t._v(" 4.13 ELF头中的e_shnum")]),t._v(" "),a("p",[t._v("节头表(section head table)中的section header条目数")]),t._v(" "),a("h3",{attrs:{id:"_4-14-elf头中的e-shstrndx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-14-elf头中的e-shstrndx"}},[t._v("#")]),t._v(" 4.14 ELF头中的e_shstrndx")]),t._v(" "),a("p",[t._v("字符串节section header在section header table中的索引")]),t._v(" "),a("h2",{attrs:{id:"_5-sections节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-sections节"}},[t._v("#")]),t._v(" 5. SECTIONS节")]),t._v(" "),a("p",[t._v("节是包括除了ELF头，ELF Section header table , ELF Program header table之外的所有东西。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("节的内容中没有节的描述信息，它的描述信息都在section header table中对应该的section header中。")])]),t._v(" "),a("h2",{attrs:{id:"_6-section-header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-section-header"}},[t._v("#")]),t._v(" 6. Section header")]),t._v(" "),a("p",[t._v("在linux中section header的定义如下：")]),t._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("elf64_shdr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Elf64_Word sh_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Section name, index in string tbl */")]),t._v("\n  Elf64_Word sh_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Type of section */")]),t._v("\n  Elf64_Xword sh_flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Miscellaneous section attributes */")]),t._v("\n  Elf64_Addr sh_addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Section virtual addr at execution */")]),t._v("\n  Elf64_Off sh_offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Section file offset */")]),t._v("\n  Elf64_Xword sh_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Size of section in bytes */")]),t._v("\n  Elf64_Word sh_link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Index of another section */")]),t._v("\n  Elf64_Word sh_info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Additional section information */")]),t._v("\n  Elf64_Xword sh_addralign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Section alignment */")]),t._v("\n  Elf64_Xword sh_entsize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Entry size if section holds table */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" Elf64_Shdr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h2",{attrs:{id:"_7-section-header-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-section-header-table"}},[t._v("#")]),t._v(" 7. Section header table")]),t._v(" "),a("p",[t._v("是section header的集合,这个表的地址在ELF头中有，是e_shoff这个字段")]),t._v(" "),a("h2",{attrs:{id:"_8-program-header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-program-header"}},[t._v("#")]),t._v(" 8. Program header")]),t._v(" "),a("p",[t._v("在linux中Program header的定义如下：")]),t._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("elf64_phdr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tElf64_Word p_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Word p_flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tElf64_Off p_offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment file offset */")]),t._v("\n\tElf64_Addr p_vaddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment virtual address */")]),t._v("\n\tElf64_Addr p_paddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment physical address */")]),t._v("\n\tElf64_Xword p_filesz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment size in file */")]),t._v("\n\tElf64_Xword p_memsz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment size in memory */")]),t._v("\n\tElf64_Xword p_align"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Segment alignment, file & memory */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" Elf64_Phdr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h2",{attrs:{id:"_9-program-header-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-program-header-table"}},[t._v("#")]),t._v(" 9. Program header table")]),t._v(" "),a("p",[t._v("是Program header的集合,这个表的地址在ELF头中有，是e_phoff这个字段")]),t._v(" "),a("h2",{attrs:{id:"_10-特殊的一些section"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-特殊的一些section"}},[t._v("#")]),t._v(" 10. 特殊的一些Section")]),t._v(" "),a("h3",{attrs:{id:"_10-1-string-table-section"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-string-table-section"}},[t._v("#")]),t._v(" 10.1 string table section")]),t._v(" "),a("p",[t._v("string table这个节保存了所有的了section的name，也就是说我们可以读取这个段的内容知道，都有那些个section.")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("欢迎评论、探讨,如果发现错误请指正。转载请注明出处！ "),a("a",{attrs:{href:"http://www.tsz.wiki",target:"_blank",rel:"noopener noreferrer"}},[t._v("探索者"),a("OutboundLink")],1)])]),t._v(" "),a("hr"),t._v(" "),a("Vssue",{attrs:{title:t.$title}})],1)}),[],!1,null,null,null);s.default=n.exports}}]);
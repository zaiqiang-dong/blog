import{_ as u,r as Q,o,c as p,d as l,a,w as s,e as n,b as T}from"./app.b41e1272.js";const f="/assets/memory_modle_16.7478d342.png",_="/assets/min-kbytes.83049e88.png",T1=JSON.parse('{"title":"水位线的计算","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. 水位线的使用","slug":"_1-水位线的使用","link":"#_1-水位线的使用","children":[]},{"level":2,"title":"2. 水位线的设置","slug":"_2-水位线的设置","link":"#_2-水位线的设置","children":[]},{"level":2,"title":"3. 小结","slug":"_3-小结","link":"#_3-小结","children":[]}],"relativePath":"linux/memory/buddy/wartermark/watermark.md"}'),g={name:"linux/memory/buddy/wartermark/watermark.md"},b=T("",13),w={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.544ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.577ex",height:"2.851ex",role:"img",focusable:"false",viewBox:"0 -1019.7 21029 1260","aria-hidden":"true"},H=T("",1),k=[H],x=T("",5),M=l("li",null,[l("p",null,[n("代码18～21行： 累加各个zone的页面数到"),l("code",null,"lowmem_pages"),n(".")])],-1),Z=l("li",null,[l("p",null,"代码23行： 就是对各个zone都计算一下水位线。")],-1),E=l("p",null,[n("代码27～28行： 这两个是整个函数的核心，这里的"),l("code",null,"pages_min"),n("就是"),l("code",null,"min_free_kbytes"),n("除以4转化为整个系统应该保留的最小页面数。那这里的"),l("code",null,"tmp"),n("计算出来就应该是当前循环的zone所应保留的最小页面数，具体公式如下")],-1),D={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.016ex"},xmlns:"http://www.w3.org/2000/svg",width:"48.597ex",height:"5.319ex",role:"img",focusable:"false",viewBox:"0 -1460 21480 2351","aria-hidden":"true"},A=T("",1),z=[A],V={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.059ex"},xmlns:"http://www.w3.org/2000/svg",width:"48.543ex",height:"5.285ex",role:"img",focusable:"false",viewBox:"0 -1426 21456.2 2336","aria-hidden":"true"},S=T("",1),I=[S],R=l("li",null,[l("p",null,[n("代码49行： 设置"),l("code",null,"zone->_watermark[WMARK_MIN]"),n("值")])],-1),N={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.781ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.782ex",height:"2.862ex",role:"img",focusable:"false",viewBox:"0 -919.8 1671.8 1264.8","aria-hidden":"true"},W=T("",1),B=[W],K={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.816ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.005ex",height:"2.773ex",role:"img",focusable:"false",viewBox:"0 -864.9 10168.2 1225.5","aria-hidden":"true"},j=T("",1),O=[j],q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.781ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.741ex",height:"2.862ex",role:"img",focusable:"false",viewBox:"0 -919.8 4747.3 1264.8","aria-hidden":"true"},$=T("",1),U=[$],X=l("li",null,[l("p",null,[n("代码62~63行： 设置"),l("code",null,"zone->_watermark[WMARK_LOW]"),n("和"),l("code",null,"zone->_watermark[WMAR]")])],-1),Y=T("",5);function a1(F,s1,n1,t1,l1,e1){const t=Q("mi"),e=Q("mo"),m=Q("mn"),y=Q("msqrt"),r=Q("math"),i=Q("mjx-assistive-mml"),c=Q("mrow"),d=Q("mfrac"),h=Q("Vssue");return o(),p("div",null,[b,l("mjx-container",w,[(o(),p("svg",L,k)),a(i,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:s(()=>[a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("w")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("i")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("f")]),_:1}),a(t,null,{default:s(()=>[n("r")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("k")]),_:1}),a(t,null,{default:s(()=>[n("b")]),_:1}),a(t,null,{default:s(()=>[n("y")]),_:1}),a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("s")]),_:1}),a(e,null,{default:s(()=>[n("=")]),_:1}),a(y,null,{default:s(()=>[a(t,null,{default:s(()=>[n("l")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("w")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("k")]),_:1}),a(t,null,{default:s(()=>[n("b")]),_:1}),a(t,null,{default:s(()=>[n("y")]),_:1}),a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("s")]),_:1}),a(e,null,{default:s(()=>[n("∗")]),_:1}),a(m,null,{default:s(()=>[n("16")]),_:1})]),_:1})]),_:1})]),_:1})]),x,l("ul",null,[M,Z,l("li",null,[E,l("mjx-container",D,[(o(),p("svg",v,z)),a(i,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:s(()=>[a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1}),a(e,null,{default:s(()=>[n("=")]),_:1}),a(d,null,{default:s(()=>[a(c,null,{default:s(()=>[a(t,null,{default:s(()=>[n("p")]),_:1}),a(t,null,{default:s(()=>[n("a")]),_:1}),a(t,null,{default:s(()=>[n("g")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("s")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("i")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(e,null,{default:s(()=>[n("∗")]),_:1}),a(t,null,{default:s(()=>[n("z")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("a")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("a")]),_:1}),a(t,null,{default:s(()=>[n("g")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("d")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1}),a(t,null,{default:s(()=>[n("a")]),_:1}),a(t,null,{default:s(()=>[n("g")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("s")]),_:1}),a(e,{stretchy:"false"},{default:s(()=>[n("(")]),_:1}),a(t,null,{default:s(()=>[n("z")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(e,{stretchy:"false"},{default:s(()=>[n(")")]),_:1})]),_:1}),a(c,null,{default:s(()=>[a(t,null,{default:s(()=>[n("l")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("w")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("_")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1}),a(t,null,{default:s(()=>[n("a")]),_:1}),a(t,null,{default:s(()=>[n("g")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,null,{default:s(()=>[n("s")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),l("mjx-container",V,[(o(),p("svg",C,I)),a(i,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:s(()=>[a(e,null,{default:s(()=>[n("=")]),_:1}),a(d,null,{default:s(()=>[a(c,null,{default:s(()=>[a(t,{mathvariant:"normal"},{default:s(()=>[n("整")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("个")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("系")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("统")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("保")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("留")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("最")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("少")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("页")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("面")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("数")]),_:1}),a(e,null,{default:s(()=>[n("∗")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("当")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("前")]),_:1}),a(t,null,{default:s(()=>[n("z")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("的")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("页")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("面")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("数")]),_:1})]),_:1}),a(c,null,{default:s(()=>[a(t,{mathvariant:"normal"},{default:s(()=>[n("所")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("有")]),_:1}),a(t,null,{default:s(()=>[n("z")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("总")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("的")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("页")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("面")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("数")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),R,l("li",null,[l("p",null,[n("代码57～59： 这里就是从"),l("mjx-container",N,[(o(),p("svg",P,B)),a(i,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:s(()=>[a(d,null,{default:s(()=>[a(c,null,{default:s(()=>[a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1})]),_:1}),a(m,null,{default:s(()=>[n("4")]),_:1})]),_:1})]),_:1})]),_:1})]),n("和"),l("mjx-container",K,[(o(),p("svg",G,O)),a(i,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:s(()=>[a(t,{mathvariant:"normal"},{default:s(()=>[n("当")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("前")]),_:1}),a(t,null,{default:s(()=>[n("z")]),_:1}),a(t,null,{default:s(()=>[n("o")]),_:1}),a(t,null,{default:s(()=>[n("n")]),_:1}),a(t,null,{default:s(()=>[n("e")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("页")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("面")]),_:1}),a(t,{mathvariant:"normal"},{default:s(()=>[n("数")]),_:1}),a(e,null,{default:s(()=>[n("∗")]),_:1}),a(d,null,{default:s(()=>[a(m,null,{default:s(()=>[n("10")]),_:1}),a(m,null,{default:s(()=>[n("10000")]),_:1})]),_:1})]),_:1})]),_:1})]),n("中取一个最大的，这里我的理解是考虑kswapd运行需要的最小内存，而且我的实验平台，最终都是"),l("mjx-container",q,[(o(),p("svg",J,U)),a(i,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:s(()=>[a(r,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:s(()=>[a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1}),a(e,null,{default:s(()=>[n("=")]),_:1}),a(d,null,{default:s(()=>[a(c,null,{default:s(()=>[a(t,null,{default:s(()=>[n("t")]),_:1}),a(t,null,{default:s(()=>[n("m")]),_:1}),a(t,null,{default:s(()=>[n("p")]),_:1})]),_:1}),a(m,null,{default:s(()=>[n("4")]),_:1})]),_:1})]),_:1})]),_:1})]),n(";")])]),X]),Y,a(h,{title:F.$title},null,8,["title"])])}const o1=u(g,[["render",a1]]);export{T1 as __pageData,o1 as default};

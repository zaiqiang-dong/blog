import{_,r as T,o as r,c,d as e,e as n,a as s,w as a,b as Q}from"./app.21594eaf.js";const b="/assets/process_03.f129bf57.png",g="/assets/process-00.9bff404c.png",f="/assets/process_05.4b67e91a.png",H="/assets/process_04.306eccea.png",x1=JSON.parse('{"title":"PELT计算","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. PELT概述","slug":"_1-pelt概述","link":"#_1-pelt概述","children":[]},{"level":2,"title":"2. PELT计算","slug":"_2-pelt计算","link":"#_2-pelt计算","children":[{"level":3,"title":"2.1 算法基本思想","slug":"_2-1-算法基本思想","link":"#_2-1-算法基本思想","children":[]},{"level":3,"title":"2.2 计算过程","slug":"_2-2-计算过程","link":"#_2-2-计算过程","children":[]}]},{"level":2,"title":"3. 小结","slug":"_3-小结","link":"#_3-小结","children":[]}],"relativePath":"linux/process/pelt/pelt.md"}'),w={name:"linux/process/pelt/pelt.md"},L=Q("",9),V=e("li",null,"将进程运行时间分为一个个计算周期，内核中以1024us为一个周期",-1),x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.5ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -683 5966.9 888","aria-hidden":"true"},M=Q("",1),D=[M],Z={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.136ex",height:"2.349ex",role:"img",focusable:"false",viewBox:"0 -833.2 4038.1 1038.2","aria-hidden":"true"},v=Q("",1),A=[v],C=e("img",{src:b,alt:"cal"},null,-1),S=e("img",{src:g,alt:"cal2"},null,-1),P={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"36.836ex",height:"1.758ex",role:"img",focusable:"false",viewBox:"0 -583 16281.6 777","aria-hidden":"true"},B=Q("",1),R=[B],j={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.866ex",height:"2.351ex",role:"img",focusable:"false",viewBox:"0 -833.9 6128.8 1038.9","aria-hidden":"true"},q=Q("",1),N=[q],G={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.058ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7539.6 1000","aria-hidden":"true"},J=Q("",1),U=[J],$={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.016ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.342ex",height:"5.319ex",role:"img",focusable:"false",viewBox:"0 -1460 22693.4 2351","aria-hidden":"true"},W=Q("",1),Y=[W],K=e("p",null,"那么这里 y=0.97857206, 内核中取了一个n=LOAD_AVG_MAX_N=345,这样就得到",-1),s1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.414ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 5928.9 862.8","aria-hidden":"true"},n1=Q("",1),l1=[n1],t1=e("p",null,[n("为什么可以这样取值，可以看下面的这个等比数列求和曲线： "),e("img",{src:f,alt:"cal3"})],-1),e1=e("h3",{id:"_2-2-计算过程",tabindex:"-1"},[n("2.2 计算过程 "),e("a",{class:"header-anchor",href:"#_2-2-计算过程","aria-hidden":"true"},"#")],-1),p1=e("p",null,[n("计算过程分为下面三个阶段，分别为d1,d2,d3，如下图所示： "),e("img",{src:H,alt:"pelt"})],-1),o1=e("p",null,"说明：",-1),Q1=e("li",null,"a点为上次计算的时间点，b点为当前计算点",-1),T1=e("li",null,"从a到b一共经过了p个周期",-1),r1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.546ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -694 2893.1 899","aria-hidden":"true"},i1=Q("",1),d1=[i1],F1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.009ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -694 5308 899","aria-hidden":"true"},u1=Q("",1),y1=[u1],h1=e("li",null,"d2部分就是我们前面2.1中等比数列求和，只是内核做一些优化，回头代码中再看",-1),_1=Q("",7);function b1(y,g1,f1,H1,w1,L1){const l=T("mi"),o=T("msub"),t=T("mo"),m=T("msup"),i=T("math"),d=T("mjx-assistive-mml"),p=T("mn"),F=T("mrow"),u=T("mfrac"),h=T("Vssue");return r(),c("div",null,[L,e("ul",null,[V,e("li",null,[n("在第n个周期的负载贡献经过m个周期会衰减成"),e("mjx-container",x,[(r(),c("svg",k,D)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("P")]),_:1}),s(l,null,{default:a(()=>[n("m")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("P")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("∗")]),_:1}),s(m,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(l,null,{default:a(()=>[n("m")]),_:1})]),_:1})]),_:1})]),_:1})]),n("，内核中定义了一个衰减因子y=0.97857206")]),e("li",null,[n("每周过32个周期负载贡献会衰减为原来的一半,也就是"),e("mjx-container",Z,[(r(),c("svg",E,A)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(m,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(p,null,{default:a(()=>[n("3")]),_:1})]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("0.5")]),_:1})]),_:1})]),_:1})])])]),e("p",null,[n("如下图所示： "),C,n(" 通过上图，我们可以发现这里其实是一个等比数列求和的过程。我们可以把上图转化成下面这个图： "),S,n(" 也就是说："),e("mjx-container",P,[(r(),c("svg",I,R)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("n")]),_:1}),s(p,null,{default:a(()=>[n("7")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("7")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("6")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("5")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("4")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("3")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("+")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1})]),_:1})]),n("，另外还可以得到通项公式："),e("mjx-container",j,[(r(),c("svg",O,N)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("∗")]),_:1}),s(m,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(F,{"data-mjx-texclass":"ORD"},{default:a(()=>[s(l,null,{default:a(()=>[n("n")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),n(" 这里我们直接给出等比数列求和公式，推导过程请自己google一下就可以了，公式如下：")]),e("mjx-container",G,[(r(),c("svg",z,U)),s(d,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("S")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n(",")]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n("(")]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n(")")]),_:1})]),_:1})]),_:1})]),e("mjx-container",$,[(r(),c("svg",X,Y)),s(d,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("S")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(u,null,{default:a(()=>[s(F,null,{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("∗")]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n("(")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(m,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n(")")]),_:1})]),_:1}),s(F,null,{default:a(()=>[s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1})]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(u,null,{default:a(()=>[s(F,null,{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1})]),_:1}),s(F,null,{default:a(()=>[s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1})]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(u,null,{default:a(()=>[s(F,null,{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(l,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("p")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1}),s(F,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(t,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1}),s(t,null,{default:a(()=>[n(",")]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n("(")]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1}),s(t,null,{default:a(()=>[n("≠")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,{stretchy:"false"},{default:a(()=>[n(")")]),_:1})]),_:1})]),_:1})]),K,e("mjx-container",s1,[(r(),c("svg",a1,l1)),s(d,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:a(()=>[s(o,null,{default:a(()=>[s(l,null,{default:a(()=>[n("S")]),_:1}),s(F,{"data-mjx-texclass":"ORD"},{default:a(()=>[s(l,null,{default:a(()=>[n("m")]),_:1}),s(l,null,{default:a(()=>[n("a")]),_:1}),s(l,null,{default:a(()=>[n("x")]),_:1})]),_:1})]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("47742")]),_:1})]),_:1})]),_:1})]),t1,e1,p1,o1,e("ul",null,[Q1,T1,e("li",null,[n("d1部分会单计算"),e("mjx-container",r1,[(r(),c("svg",c1,d1)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(l,null,{default:a(()=>[n("d")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(t,null,{default:a(()=>[n("∗")]),_:1}),s(m,null,{default:a(()=>[s(l,null,{default:a(()=>[n("y")]),_:1}),s(l,null,{default:a(()=>[n("p")]),_:1})]),_:1})]),_:1})]),_:1})])]),e("li",null,[n("d3部分不需要计算因为"),e("mjx-container",F1,[(r(),c("svg",m1,y1)),s(d,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:a(()=>[s(i,{xmlns:"http://www.w3.org/1998/Math/MathML"},{default:a(()=>[s(l,null,{default:a(()=>[n("d")]),_:1}),s(p,null,{default:a(()=>[n("3")]),_:1}),s(t,null,{default:a(()=>[n("∗")]),_:1}),s(l,null,{default:a(()=>[n("y")]),_:1}),s(p,null,{default:a(()=>[n("0")]),_:1}),s(t,null,{default:a(()=>[n("=")]),_:1}),s(l,null,{default:a(()=>[n("d")]),_:1}),s(p,null,{default:a(()=>[n("3")]),_:1})]),_:1})]),_:1})])]),h1]),_1,s(h,{title:y.$title},null,8,["title"])])}const k1=_(w,[["render",b1]]);export{x1 as __pageData,k1 as default};
